<!DOCTYPE html>
<html>
<head>
    <title>Formulario de Registro</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS propio -->
    <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}">
</head>

<body>

<div class="container mt-5">

    <div class="card shadow p-4">

        <h2 class="text-center mb-4">Formulario de Registro</h2>

        <form method="POST">

            <!-- DATOS PERSONALES -->
            <h4 class="seccion">Datos Personales</h4>

            <div class="row">
                <div class="col-md-4">
                    <label>Nombres</label>
                    <input class="form-control" name="nombres" value="{{ datos.nombres }}">
                </div>

                <div class="col-md-4">
                    <label>Apellido paterno</label>
                    <input class="form-control" name="apellido_paterno" value="{{ datos.apellido_paterno }}">
                </div>

                <div class="col-md-4">
                    <label>Apellido materno</label>
                    <input class="form-control" name="apellido_materno" value="{{ datos.apellido_materno }}">
                </div>
            </div>

            <div class="mt-3">
                <label>Edad</label>
                <input type="number" class="form-control" name="edad" value="{{ datos.edad }}">
            </div>

            <!-- CONTACTO -->
            <h4 class="seccion mt-4">Datos de Contacto</h4>

            <label>Calle</label>
            <input class="form-control" name="calle" value="{{ datos.calle }}">

            <div class="row mt-3">
                <div class="col-md-6">
                    <label>Número exterior</label>
                    <input class="form-control" name="numero_exterior" value="{{ datos.numero_exterior }}">
                </div>

                <div class="col-md-6">
                    <label>Número interior</label>
                    <input class="form-control" name="numero_interior" value="{{ datos.numero_interior }}">
                </div>
            </div>

            <div class="mt-3">
                <label>Teléfono</label>
                <input class="form-control" name="telefono" value="{{ datos.telefono }}">
            </div>

            <div class="mt-3">
                <label>Correo</label>
                <input type="email" class="form-control" name="correo" value="{{ datos.correo }}">
            </div>

            <!-- IDENTIFICACIÓN -->
            <h4 class="seccion mt-4">Datos de Identificación</h4>

            <div class="mt-2">
                <label>CURP</label>
                <input class="form-control" name="curp" value="{{ datos.curp }}">
            </div>

            <div class="mt-3">
                <label>Número de Seguro Social</label>
                <input class="form-control" name="nss" value="{{ datos.nss }}">
            </div>

            <div class="mt-3">
                <label>RFC</label>
                <input class="form-control" name="rfc" value="{{ datos.rfc }}">
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Guardar y Descargar PDF </button>
            </div>

        </form>

    </div>

</div>

<script>

// Obtener todos los campos del formulario
const campos = document.querySelectorAll("input, textarea");

// Guardar automáticamente cuando se escribe
campos.forEach(campo => {
    campo.addEventListener("input", guardarAutomatico);
});

function guardarAutomatico() {

    const datos = {};

    campos.forEach(campo => {
        datos[campo.name] = campo.value;
    });

    fetch("/guardar_auto", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(datos)
    });
}

</script>

</body>
</html>
